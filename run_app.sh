#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è "–ñ–∏–≤–∞—è –ö–æ–∂–∞"
# –ê–≤—Ç–æ—Ä: –ê–Ω—Ç–æ–Ω
# –î–∞—Ç–∞: $(date)

echo "üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è '–ñ–∏–≤–∞—è –ö–æ–∂–∞'..."

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –º—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
if [ ! -f "pubspec.yaml" ]; then
    echo "‚ùå –û—à–∏–±–∫–∞: pubspec.yaml –Ω–µ –Ω–∞–π–¥–µ–Ω. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞."
    exit 1
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ Flutter —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
if ! command -v flutter &> /dev/null; then
    echo "‚ùå –û—à–∏–±–∫–∞: Flutter –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Flutter –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞."
    exit 1
fi

echo "üì¶ –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π..."
flutter pub get

if [ $? -ne 0 ]; then
    echo "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π"
    exit 1
fi

echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤..."
flutter devices

echo ""
echo "üéØ –í—ã–±–µ—Ä–∏—Ç–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –¥–ª—è –∑–∞–ø—É—Å–∫–∞:"
echo "1) macOS (desktop)"
echo "2) Chrome (web)"
echo "3) iOS Simulator (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)"
echo "4) Android Emulator (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)"
echo ""
read -p "–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (1-4): " device_choice

case $device_choice in
    1)
        echo "üñ•Ô∏è  –ó–∞–ø—É—Å–∫ –Ω–∞ macOS..."
        flutter run -d macos
        ;;
    2)
        echo "üåê –ó–∞–ø—É—Å–∫ –≤ Chrome..."
        flutter run -d chrome
        ;;
    3)
        echo "üì± –ó–∞–ø—É—Å–∫ –≤ iOS Simulator..."
        flutter run -d ios
        ;;
    4)
        echo "ü§ñ –ó–∞–ø—É—Å–∫ –≤ Android Emulator..."
        flutter run -d emulator-5554
        ;;
    *)
        echo "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä. –ó–∞–ø—É—Å–∫–∞—é –Ω–∞ macOS –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é..."
        flutter run -d macos
        ;;
esac

echo ""
echo "‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ! –ù–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å –∏–∑—É—á–µ–Ω–∏–µ–º '–ñ–∏–≤–æ–π –ö–æ–∂–∏'!"
echo ""
echo "üìö –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:"
echo "   ‚Ä¢ –ê–Ω–∞—Ç–æ–º–∏—è - –∏–∑—É—á–∏—Ç–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–±–æ—Ç—ã –Ω–µ—Ä–≤–Ω—ã—Ö –æ–∫–æ–Ω—á–∞–Ω–∏–π"
echo "   ‚Ä¢ –ì–∞—Ä–¥–µ—Ä–æ–± - –ø–æ–¥–±–µ—Ä–∏—Ç–µ –∏–¥–µ–∞–ª—å–Ω—É—é –æ–¥–µ–∂–¥—É"
echo "   ‚Ä¢ –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç - –ø—Ä–æ–≤–µ–¥–∏—Ç–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç —Å –Ω–∞–∫–∞—á–∫–æ–π –º—ã—à—Ü"
echo "   ‚Ä¢ –ü—Ä–æ—Ñ–∏–ª—å - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ —Å–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å"
echo "" 